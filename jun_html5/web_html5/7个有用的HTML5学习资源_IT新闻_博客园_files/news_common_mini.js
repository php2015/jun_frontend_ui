function getPassportHost(){var n=location.hostname,t=n.substring(n.lastIndexOf("."));return"http://passport.cnblogs"+t}function login(){return location.href=getPassportHost()+"/login.aspx?ReturnUrl="+location.href,!1}function login2(n){var t=encodeURIComponent(location.href+"#"+n);return location.href=getPassportHost()+"/login.aspx?ReturnUrl="+t,!1}function register(){return location.href=getPassportHost()+"/register.aspx?ReturnUrl="+location.href,!1}function logout(){return confirm("确定要退出吗?")&&(location.href=getPassportHost()+"/logout.aspx?ReturnUrl="+location.href),!1}function GetUserInfo(){$.ajax({url:"/service/UserService.asmx/GetUserInfo",data:"{}",type:"post",dataType:"json",contentType:"application/json; charset=utf-8",success:function(n){$("#login_area").html(n.d)}})}function GetNewMsgCount(){$("#lnk_site_msg")&&$.ajax({url:"/service/UserService.asmx/GetNewMsgCount",data:"{}",type:"post",dataType:"json",contentType:"application/json; charset=utf-8",cache:!1,success:function(n){if(n.d>0){var t=document.createElement("span");t.style.color="red",t.innerHTML="("+n.d+")",$("#lnk_site_msg").append(t)}}})}function digg_news(n){$.ajax({url:"/service/NewsService.asmx/DiggNews",data:"{newsId:"+n+"}",type:"post",dataType:"json",contentType:"application/json; charset=utf8",success:function(t){t.d>0?$("#digg_num_"+n).html(t.d):t.d==-1&&alert("您已经推荐过该新闻！")}})}function Check(n){if(n.keyCode==13){document.getElementById("btnSearch").focus();return}}function zzk_go(){var n=encodeURIComponent(document.getElementById("q").value);window.location="http://zzk.cnblogs.com/s?t=n&w="+n}function zzk_go_enter(n){if(n.keyCode==13)return zzk_go(),!1}function CheckAudit(){$.ajax({url:"/mvcajax/news/GetAuditReminder",data:"{}",type:"post",dataType:"text",contentType:"application/json; charset=utf8",success:function(n){$("#lbAuditTips").html(n),$("#lbAuditTips").show()}})}function set_a_title(n){var t=$.trim($(n).text());t&&!$(n).attr("title")&&$(n).attr("title",t)}var ajaxRequest={};ajaxRequest.type="post",ajaxRequest.dataType="json",ajaxRequest.contentType="application/json; charset=utf8",typeof jQuery!="undefined"&&$(function(){GetNewMsgCount()})